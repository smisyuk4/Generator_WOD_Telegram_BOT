В гугл таблице на разных закладках хранятся компоненты тренировки.
В гугл таблице есть отдельная страница - база клиентов и контроля оплаты.

Когда клиент начинает общаться с ботом, то получает уведомление что необходимо купить абонемент. Также тренер получает смс о запросе.
После того как клиент оплатил деньги - тренер в ручном режиме изменяет статус оплаты в таблице на "оплачено" (ставит флажок в ячейке).

После того как тренировки оплачены - клиент может сгенерировать себе тренировку - 1 в сутки. При попытке повторить запрос - получит отказ.
С момента формирования первой тренировки начинается отсчёт срока действия абонемента - 7 дней.

Клиент может генерировать каждый день по 1 тренировке, но после истечения 7 дней он получит отказ если попытается генерировать новую тренировку. В этот момент статус оплаты изменится на "не оплачено" (флажок уберётся автоматически). Тренер будет уведомлён, что у клиента закончился абонемент.

Если с ботом начинает общатья старый клиент, то новая запись не создаётся.
Если старй клиент спустя время оплатил тренироки, то тренер удаляет старые даты в таблице и изменяет статус оплаты.
